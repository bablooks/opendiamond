%%\input{texcam}
\documentclass{article}
\usepackage{times}
\usepackage{mathptm}
\usepackage{url,epsfig,graphicx,color}
\usepackage{cite,xspace}

\newcommand{\rw}[1]{{\em #1}}

\title{Diamond Design}
\author{
  Larry Huston
}

\begin{document}

\maketitle


\section{Overview} \label{sec:overview}

The document provides an overview of the different components 
in the Diamond implementation and how they integrate together.

The Diamond implementation is currently implemented as user
space Linux software.   There are two logical pieces of
software the host code and the active disk code.  Each of these
are built using a set of libraries, many of these libraries are
in common between both implementations.

Many of the different library implementations create their
own thread of control to perform work.  In almost all
cases any communcation between the various components
is asynchronous (message passing).  This allows us
to get maximum concurrency.  This also applies to all
of the communications between the host and the storage devices.


\subsection{Host Implementation}

The host implemenation is a library that is linked against the domain
application.  This library is composed of several other libraries
that do most of the work.  Figure~\ref{fig:hostoverview} shows
the major components of this library.

\begin{figure}[tbp]
\begin{center}
\includegraphics[width=\linewidth]{pics/host_structure}%
\end{center}
\caption{\textbf\{Host Implementation.}
The different components of the host implementation.
XXX fill in.
\label{fig:hostoeverview}
\end{figure}
                                                                                


\subsection{Disk Implementation}



\section{Libraries}

\begin{itemize}

\item
\textbf{Filter evaluation (\texttt{libfexec})}
The filter evaluation library is responsible to using a searchlet
to evaluate the objects.  The library has calls that load a searchlet
and then calls to evaluate an object against the searchlet.  The 
return value from the evaluate call will indicate whether the object
passes searchlet or not.

The filter evaluation library keeps all the statistics associated
with evaluating the different filters (conditionial pass propabilities)
average cost to evaluate a filter, etc.   This library also
implements the different filter ordering algorithms and dynamically
changes the orders that filters are evaluated. 

\item
\textbf{Object Disk (\texttt{libodisk})}
The object disk library implements our object disk implementation.
The current version keeps all of the object in the native file.
Associated with each object there are two files.  The first file
keeps the object data, the other file stores the object attributes.
These attributes are common values such as mod time as well as
attributes added by the application storing the data.  Some examples
are the MIME type so applications can help understand file contents
and pointers to other object so that other relationships can
be kept track of.

\item
\textbf{Tools (\texttt{libtools})}
The tools library is a dumping ground for code snippets that
many different libraries may want to use.  This includes ring
buffers for communication between the different components, timing
support, list management, etc. 

\item
\textbf{DCTL (\texttt{libdctl})}


\item
\textbf{Remote Object Access (\texttt{libod})}

\item
\textbf{Diamond Config (\texttt{libdconfig})}

\item
\textbf{Diamond Config (\texttt{libdconfig})}

\item
\textbf{Diamond Config (\texttt{libsearchlet})}


\end{itemize}


\end{document}
