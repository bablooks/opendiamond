#
#  The OpenDiamond Platform for Interactive Search
#  Version 2
#
#  Copyright (c) 2002-2005 Intel Corporation
#  Copyright (c) 2006 Larry Huston <larry@thehustons.net>
#  All rights reserved.
#
#  This software is distributed under the terms of the Eclipse Public
#  License, Version 1.0 which can be found in the file named LICENSE.
#  ANY USE, REPRODUCTION OR DISTRIBUTION OF THIS SOFTWARE CONSTITUTES
#  RECIPIENT'S ACCEPTANCE OF THIS AGREEMENT
#

ROOTDIR = @top_srcdir@
SRCDIR = @srcdir@
VPATH = @srcdir@
OBJROOT = @OBJROOT@



LIBOBJS += ring.o rtimer_std.o rtimer.o sig_calc.o
LIBOBJS += rstat.o rgraph.o rcomb.o user.o file_tools.o
LIBOBJS += ports.o

LIBSRCS += ring.c rtimer_std.c rtimer.c  sig_calc.c
LIBSRCS += rstat.c rgraph.c rcomb.c user.c file_tools.c
LIBSRCS += ports.c

TESTOBJS = test_ring.o
TESTSRCS = test_ring.c

SHARED_HEADERS = ring.h lib_tools.h queue.h sig_calc.h 
SHARED_HEADERS += rtimer.h rcomb.h rgraph.h rstat.h ports.h

SRCS = $(LIBSRCS) $(TESTSRCS) 
OBJS = $(LIBOBJS) $(TESTOBJS) 


#
# Compilation Targets
#

TARGETS = libtools.a test_ring 

include $(OBJROOT)/Makefile.template

test_ring: $(TESTOBJS) libtools.a
	$(CC) $(CFLAGS) -o test_ring $(TESTOBJS) libtools.a

test_rtimer: test_rtimer.o libtools.a
	$(CC) $(CFLAGS) -O0 -o $@ $< libtools.a -lm

test_rstat: test_rstat.o libtools.a
	$(CC) $(CFLAGS) -O0 -o $@ $< libtools.a -lm

test_rcomb:	test_rcomb.o libtools.a
	$(CC) $(CFLAGS) -O0 -o $@ $< libtools.a -lm
