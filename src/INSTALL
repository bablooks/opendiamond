Building the system
-------------------

To build the Diamond system you must first run the "configure" script
to generate the make files (if your are building from the CVS tree
instead of a tar file, then you must run 'autoconf' first).  You
have the option of running configure at the base directory
or the build environment supports VPATHs if you wish to keep
a seperate build hierarchy.

Once "configure" has completed, build the system
by typing makes.  As the system builds, all of the important header
files, libraries and binaries will be put in target/{include, lib, bin}.

One make has completed, you can either run diamond out of the 
build directory or you can install it in the system.  Running
"make install" will install all the files in 
/usr/local/diamond/{include,lib,bin}  (this requires root access).  Options
to make install allow data to be install into other locations.

Diamond Configuration
---------------------

Diamond has two components.  The first runs on the backend
where the data is stored and the other is the runtime running
on the host where the application is executed.  Both
require special configuration files that describe
how the system is configured and where data is located.

On the back-end the daemon `adiskd` needs to be running.  This
handles incoming requests and creates new search contexts by forking
off new processes.  To simplify deployment, we current run this
as a specific user instead of as a services.  Any files that
are to be processed during the search, need to be read-accessible
to the user starts the daemon.

The front-end software is included in the diamond applications
through the libraries. 

In both cases, the necessary configuration files live
in configuration directory.  The system will search the following
locations for the configurations files in this order.  First
it looks for an envirnmental variable "DIAMOND_CONFIG"  if
this is set, it uses the value as the potential directory
for the configuration files.  Next is searches for a directory
called ".diamond" in the current working directory.  The last
location is "${HOME}/.diamond".  







You should be ready to build the applications as well as running adiskd.

Running adisk   
-------------

To run adiskd you will need a config file that points to where the data
is stored.  By default this is called "diamond_config".  The system
will look for the file in 3 locations in this order.  First it looks for
an environmental varialbe DIAMOND_CONFIG.  If this is set, it will
use it value as the name of the config file.  If DIAMOND_CONFIG is not
set it will look for a file called diamond_config in the local directory.  If
that doesn't exist it will look try to read /usr/local/diamond/etc/diamond_config.

The config file should have a line with the format

   DATADIR <full path of the data directory>


Once the config file exists, start the deamon by running 

	/usr/local/diamond/bin/adiskd

Now you should be able to search the data in the specified data directory.



